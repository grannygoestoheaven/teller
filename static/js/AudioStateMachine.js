// Autogenerated with StateSmith 0.19.0+b5719011215d41a81572ed347c02b22db5d1a48f.
// Algorithm: Balanced2. See https://github.com/StateSmith/StateSmith/wiki/Algorithms

// Generated state machine
class AudioStateMachine
{
    static EventId = 
    {
        CANCEL : 0,
        FORM_NOT_EMPTY : 1,
        FORM_SUBMITTED : 2,
        FROM_START_CLICKED : 3,
        INPUT_CLEARED : 4,
        MUSIC_OVER : 5,
        PLAY_PAUSE_CLICKED : 6,
        SPEECH_READY : 7,
    }
    static { Object.freeze(this.EventId); }
    
    static EventIdCount = 8;
    static { Object.freeze(this.EventIdCount); }
    
    static StateId = 
    {
        ROOT : 0,
        IDLE : 1,
        LOADING : 2,
        PAUSED : 3,
        PLAYING : 4,
        READY : 5,
        TEXT_DISPLAYED : 6,
    }
    static { Object.freeze(this.StateId); }
    
    static StateIdCount = 7;
    static { Object.freeze(this.StateIdCount); }
    
    // Used internally by state machine. Feel free to inspect, but don't modify.
    stateId;
    
    // Starts the state machine. Must be called before dispatching events. Not thread safe.
    start()
    {
        this.#ROOT_enter();
        // ROOT behavior
        // uml: TransitionTo(ROOT.<InitialState>)
        {
            // Step 1: Exit states until we reach `ROOT` state (Least Common Ancestor for transition). Already at LCA, no exiting required.
            
            // Step 2: Transition action: ``.
            
            // Step 3: Enter/move towards transition target `ROOT.<InitialState>`.
            // ROOT.<InitialState> is a pseudo state and cannot have an `enter` trigger.
            
            // ROOT.<InitialState> behavior
            // uml: TransitionTo(IDLE)
            {
                // Step 1: Exit states until we reach `ROOT` state (Least Common Ancestor for transition). Already at LCA, no exiting required.
                
                // Step 2: Transition action: ``.
                
                // Step 3: Enter/move towards transition target `IDLE`.
                this.#IDLE_enter();
                
                // Step 4: complete transition. Ends event dispatch. No other behaviors are checked.
                return;
            } // end of behavior for ROOT.<InitialState>
        } // end of behavior for ROOT
    }
    
    // Dispatches an event to the state machine. Not thread safe.
    // Note! This function assumes that the `eventId` parameter is valid.
    dispatchEvent(eventId)
    {
        switch (this.stateId)
        {
            // STATE: AudioStateMachine
            case AudioStateMachine.StateId.ROOT:
                // No events handled by this state (or its ancestors).
                break;
            
            // STATE: IDLE
            case AudioStateMachine.StateId.IDLE:
                switch (eventId)
                {
                    case AudioStateMachine.EventId.FORM_NOT_EMPTY: this.#IDLE_form_not_empty(); break;
                }
                break;
            
            // STATE: LOADING
            case AudioStateMachine.StateId.LOADING:
                switch (eventId)
                {
                    case AudioStateMachine.EventId.SPEECH_READY: this.#LOADING_speech_ready(); break;
                    case AudioStateMachine.EventId.PLAY_PAUSE_CLICKED: this.#LOADING_play_pause_clicked(); break;
                    case AudioStateMachine.EventId.CANCEL: this.#LOADING_cancel(); break;
                }
                break;
            
            // STATE: PAUSED
            case AudioStateMachine.StateId.PAUSED:
                switch (eventId)
                {
                    case AudioStateMachine.EventId.PLAY_PAUSE_CLICKED: this.#PAUSED_play_pause_clicked(); break;
                    case AudioStateMachine.EventId.FROM_START_CLICKED: this.#PAUSED_from_start_clicked(); break;
                }
                break;
            
            // STATE: PLAYING
            case AudioStateMachine.StateId.PLAYING:
                switch (eventId)
                {
                    case AudioStateMachine.EventId.PLAY_PAUSE_CLICKED: this.#PLAYING_play_pause_clicked(); break;
                    case AudioStateMachine.EventId.FORM_NOT_EMPTY: this.#PLAYING_form_not_empty(); break;
                    case AudioStateMachine.EventId.MUSIC_OVER: this.#PLAYING_music_over(); break;
                    case AudioStateMachine.EventId.FROM_START_CLICKED: this.#PLAYING_from_start_clicked(); break;
                }
                break;
            
            // STATE: READY
            case AudioStateMachine.StateId.READY:
                switch (eventId)
                {
                    case AudioStateMachine.EventId.FORM_SUBMITTED: this.#READY_form_submitted(); break;
                    case AudioStateMachine.EventId.PLAY_PAUSE_CLICKED: this.#READY_play_pause_clicked(); break;
                    case AudioStateMachine.EventId.INPUT_CLEARED: this.#READY_input_cleared(); break;
                }
                break;
            
            // STATE: TEXT_DISPLAYED
            case AudioStateMachine.StateId.TEXT_DISPLAYED:
                // No events handled by this state (or its ancestors).
                break;
        }
        
    }
    
    // This function is used when StateSmith doesn't know what the active leaf state is at
    // compile time due to sub states or when multiple states need to be exited.
    #exitUpToStateHandler(desiredState)
    {
        while (this.stateId != desiredState)
        {
            switch (this.stateId)
            {
                case AudioStateMachine.StateId.IDLE: this.#IDLE_exit(); break;
                
                case AudioStateMachine.StateId.LOADING: this.#LOADING_exit(); break;
                
                case AudioStateMachine.StateId.PAUSED: this.#PAUSED_exit(); break;
                
                case AudioStateMachine.StateId.PLAYING: this.#PLAYING_exit(); break;
                
                case AudioStateMachine.StateId.READY: this.#READY_exit(); break;
                
                case AudioStateMachine.StateId.TEXT_DISPLAYED: this.#TEXT_DISPLAYED_exit(); break;
                
                default: return;  // Just to be safe. Prevents infinite loop if state ID memory is somehow corrupted.
            }
        }
    }
    
    
    ////////////////////////////////////////////////////////////////////////////////
    // event handlers for state ROOT
    ////////////////////////////////////////////////////////////////////////////////
    
    #ROOT_enter()
    {
        this.stateId = AudioStateMachine.StateId.ROOT;
    }
    
    
    ////////////////////////////////////////////////////////////////////////////////
    // event handlers for state IDLE
    ////////////////////////////////////////////////////////////////////////////////
    
    #IDLE_enter()
    {
        this.stateId = AudioStateMachine.StateId.IDLE;
        
        // IDLE behavior
        // uml: enter / { this.actions.resetAllAudio(); this.actions.uiIdle(); this.actions.hideLoadingAnimation(); this.actions.initInputAdjustments() }
        {
            // Step 1: execute action `this.actions.resetAllAudio(); this.actions.uiIdle(); this.actions.hideLoadingAnimation(); this.actions.initInputAdjustments()`
            this.actions.resetAllAudio(); this.actions.uiIdle(); this.actions.hideLoadingAnimation(); this.actions.initInputAdjustments()
        } // end of behavior for IDLE
    }
    
    #IDLE_exit()
    {
        this.stateId = AudioStateMachine.StateId.ROOT;
    }
    
    #IDLE_form_not_empty()
    {
        // IDLE behavior
        // uml: FORM_NOT_EMPTY / { this.actions.inputNotEmpty(); } TransitionTo(READY)
        {
            // Step 1: Exit states until we reach `ROOT` state (Least Common Ancestor for transition).
            this.#IDLE_exit();
            
            // Step 2: Transition action: `this.actions.inputNotEmpty();`.
            this.actions.inputNotEmpty();
            
            // Step 3: Enter/move towards transition target `READY`.
            this.#READY_enter();
            
            // Step 4: complete transition. Ends event dispatch. No other behaviors are checked.
            return;
        } // end of behavior for IDLE
        
        // No ancestor handles this event.
    }
    
    
    ////////////////////////////////////////////////////////////////////////////////
    // event handlers for state LOADING
    ////////////////////////////////////////////////////////////////////////////////
    
    #LOADING_enter()
    {
        this.stateId = AudioStateMachine.StateId.LOADING;
        
        // LOADING behavior
        // uml: enter / { this.actions.showLoadingAnimation(); this.actions.uiLoadingButtons(); }
        {
            // Step 1: execute action `this.actions.showLoadingAnimation(); this.actions.uiLoadingButtons();`
            this.actions.showLoadingAnimation(); this.actions.uiLoadingButtons();
        } // end of behavior for LOADING
    }
    
    #LOADING_exit()
    {
        this.stateId = AudioStateMachine.StateId.ROOT;
    }
    
    #LOADING_cancel()
    {
        // LOADING behavior
        // uml: CANCEL / { this.actions.abortProcess(); this.actions.pauseAllAudio(); this.actions.resetAllAudio(); } TransitionTo(IDLE)
        {
            // Step 1: Exit states until we reach `ROOT` state (Least Common Ancestor for transition).
            this.#LOADING_exit();
            
            // Step 2: Transition action: `this.actions.abortProcess(); this.actions.pauseAllAudio(); this.actions.resetAllAudio();`.
            this.actions.abortProcess(); this.actions.pauseAllAudio(); this.actions.resetAllAudio();
            
            // Step 3: Enter/move towards transition target `IDLE`.
            this.#IDLE_enter();
            
            // Step 4: complete transition. Ends event dispatch. No other behaviors are checked.
            return;
        } // end of behavior for LOADING
        
        // No ancestor handles this event.
    }
    
    #LOADING_play_pause_clicked()
    {
        // LOADING behavior
        // uml: PLAY_PAUSE_CLICKED / { this.actions.pauseAllAudio(); } TransitionTo(PAUSED)
        {
            // Step 1: Exit states until we reach `ROOT` state (Least Common Ancestor for transition).
            this.#LOADING_exit();
            
            // Step 2: Transition action: `this.actions.pauseAllAudio();`.
            this.actions.pauseAllAudio();
            
            // Step 3: Enter/move towards transition target `PAUSED`.
            this.#PAUSED_enter();
            
            // Step 4: complete transition. Ends event dispatch. No other behaviors are checked.
            return;
        } // end of behavior for LOADING
        
        // No ancestor handles this event.
    }
    
    #LOADING_speech_ready()
    {
        // LOADING behavior
        // uml: SPEECH_READY / { this.actions.setupAndStartAllAudio(); } TransitionTo(PLAYING)
        {
            // Step 1: Exit states until we reach `ROOT` state (Least Common Ancestor for transition).
            this.#LOADING_exit();
            
            // Step 2: Transition action: `this.actions.setupAndStartAllAudio();`.
            this.actions.setupAndStartAllAudio();
            
            // Step 3: Enter/move towards transition target `PLAYING`.
            this.#PLAYING_enter();
            
            // Step 4: complete transition. Ends event dispatch. No other behaviors are checked.
            return;
        } // end of behavior for LOADING
        
        // No ancestor handles this event.
    }
    
    
    ////////////////////////////////////////////////////////////////////////////////
    // event handlers for state PAUSED
    ////////////////////////////////////////////////////////////////////////////////
    
    #PAUSED_enter()
    {
        this.stateId = AudioStateMachine.StateId.PAUSED;
        
        // PAUSED behavior
        // uml: enter / { this.actions.uiPausedButtons(); this.actions.addBlurr(); }
        {
            // Step 1: execute action `this.actions.uiPausedButtons(); this.actions.addBlurr();`
            this.actions.uiPausedButtons(); this.actions.addBlurr();
        } // end of behavior for PAUSED
    }
    
    #PAUSED_exit()
    {
        this.stateId = AudioStateMachine.StateId.ROOT;
    }
    
    #PAUSED_from_start_clicked()
    {
        // PAUSED behavior
        // uml: FROM_START_CLICKED / { this.actions.resetAllAudio(); this.actions.setupAndStartAllAudio(); } TransitionTo(PLAYING)
        {
            // Step 1: Exit states until we reach `ROOT` state (Least Common Ancestor for transition).
            this.#PAUSED_exit();
            
            // Step 2: Transition action: `this.actions.resetAllAudio(); this.actions.setupAndStartAllAudio();`.
            this.actions.resetAllAudio(); this.actions.setupAndStartAllAudio();
            
            // Step 3: Enter/move towards transition target `PLAYING`.
            this.#PLAYING_enter();
            
            // Step 4: complete transition. Ends event dispatch. No other behaviors are checked.
            return;
        } // end of behavior for PAUSED
        
        // unreachable behavior: `FROM_START_CLICKED / { this.actions.resetAllAudio(); } TransitionTo(PAUSED)` due to unconditional transition above
        
        // No ancestor handles this event.
    }
    
    #PAUSED_play_pause_clicked()
    {
        // PAUSED behavior
        // uml: PLAY_PAUSE_CLICKED / { this.actions.resumeAllAudio(); } TransitionTo(PLAYING)
        {
            // Step 1: Exit states until we reach `ROOT` state (Least Common Ancestor for transition).
            this.#PAUSED_exit();
            
            // Step 2: Transition action: `this.actions.resumeAllAudio();`.
            this.actions.resumeAllAudio();
            
            // Step 3: Enter/move towards transition target `PLAYING`.
            this.#PLAYING_enter();
            
            // Step 4: complete transition. Ends event dispatch. No other behaviors are checked.
            return;
        } // end of behavior for PAUSED
        
        // No ancestor handles this event.
    }
    
    
    ////////////////////////////////////////////////////////////////////////////////
    // event handlers for state PLAYING
    ////////////////////////////////////////////////////////////////////////////////
    
    #PLAYING_enter()
    {
        this.stateId = AudioStateMachine.StateId.PLAYING;
        
        // PLAYING behavior
        // uml: enter / { this.actions.uiPlayingButtons(); this.actions.removeBlurr(); this.actions.redDots(); }
        {
            // Step 1: execute action `this.actions.uiPlayingButtons(); this.actions.removeBlurr(); this.actions.redDots();`
            this.actions.uiPlayingButtons(); this.actions.removeBlurr(); this.actions.redDots();
        } // end of behavior for PLAYING
    }
    
    #PLAYING_exit()
    {
        this.stateId = AudioStateMachine.StateId.ROOT;
    }
    
    #PLAYING_form_not_empty()
    {
        // PLAYING behavior
        // uml: FORM_NOT_EMPTY / { this.actions.inputNotEmpty(); } TransitionTo(READY)
        {
            // Step 1: Exit states until we reach `ROOT` state (Least Common Ancestor for transition).
            this.#PLAYING_exit();
            
            // Step 2: Transition action: `this.actions.inputNotEmpty();`.
            this.actions.inputNotEmpty();
            
            // Step 3: Enter/move towards transition target `READY`.
            this.#READY_enter();
            
            // Step 4: complete transition. Ends event dispatch. No other behaviors are checked.
            return;
        } // end of behavior for PLAYING
        
        // No ancestor handles this event.
    }
    
    #PLAYING_from_start_clicked()
    {
        // PLAYING behavior
        // uml: FROM_START_CLICKED / { this.actions.resetAllAudio; this.actions.setupAndStartAllAudio; } TransitionTo(PLAYING)
        {
            // Step 1: Exit states until we reach `ROOT` state (Least Common Ancestor for transition).
            this.#PLAYING_exit();
            
            // Step 2: Transition action: `this.actions.resetAllAudio; this.actions.setupAndStartAllAudio;`.
            this.actions.resetAllAudio; this.actions.setupAndStartAllAudio;
            
            // Step 3: Enter/move towards transition target `PLAYING`.
            this.#PLAYING_enter();
            
            // Step 4: complete transition. Ends event dispatch. No other behaviors are checked.
            return;
        } // end of behavior for PLAYING
        
        // No ancestor handles this event.
    }
    
    #PLAYING_music_over()
    {
        // PLAYING behavior
        // uml: MUSIC_OVER TransitionTo(IDLE)
        {
            // Step 1: Exit states until we reach `ROOT` state (Least Common Ancestor for transition).
            this.#PLAYING_exit();
            
            // Step 2: Transition action: ``.
            
            // Step 3: Enter/move towards transition target `IDLE`.
            this.#IDLE_enter();
            
            // Step 4: complete transition. Ends event dispatch. No other behaviors are checked.
            return;
        } // end of behavior for PLAYING
        
        // No ancestor handles this event.
    }
    
    #PLAYING_play_pause_clicked()
    {
        // PLAYING behavior
        // uml: PLAY_PAUSE_CLICKED / { this.actions.pauseAllAudio(); } TransitionTo(PAUSED)
        {
            // Step 1: Exit states until we reach `ROOT` state (Least Common Ancestor for transition).
            this.#PLAYING_exit();
            
            // Step 2: Transition action: `this.actions.pauseAllAudio();`.
            this.actions.pauseAllAudio();
            
            // Step 3: Enter/move towards transition target `PAUSED`.
            this.#PAUSED_enter();
            
            // Step 4: complete transition. Ends event dispatch. No other behaviors are checked.
            return;
        } // end of behavior for PLAYING
        
        // No ancestor handles this event.
    }
    
    
    ////////////////////////////////////////////////////////////////////////////////
    // event handlers for state READY
    ////////////////////////////////////////////////////////////////////////////////
    
    #READY_enter()
    {
        this.stateId = AudioStateMachine.StateId.READY;
        
        // READY behavior
        // uml: enter / { this.actions.uiReadyButtons(); }
        {
            // Step 1: execute action `this.actions.uiReadyButtons();`
            this.actions.uiReadyButtons();
        } // end of behavior for READY
    }
    
    #READY_exit()
    {
        this.stateId = AudioStateMachine.StateId.ROOT;
    }
    
    #READY_form_submitted()
    {
        // READY behavior
        // uml: FORM_SUBMITTED / { this.actions.startNewStoryProcess(); this.actions.loadPlayer(); } TransitionTo(LOADING)
        {
            // Step 1: Exit states until we reach `ROOT` state (Least Common Ancestor for transition).
            this.#READY_exit();
            
            // Step 2: Transition action: `this.actions.startNewStoryProcess(); this.actions.loadPlayer();`.
            this.actions.startNewStoryProcess(); this.actions.loadPlayer();
            
            // Step 3: Enter/move towards transition target `LOADING`.
            this.#LOADING_enter();
            
            // Step 4: complete transition. Ends event dispatch. No other behaviors are checked.
            return;
        } // end of behavior for READY
        
        // No ancestor handles this event.
    }
    
    #READY_input_cleared()
    {
        // READY behavior
        // uml: INPUT_CLEARED TransitionTo(IDLE)
        {
            // Step 1: Exit states until we reach `ROOT` state (Least Common Ancestor for transition).
            this.#READY_exit();
            
            // Step 2: Transition action: ``.
            
            // Step 3: Enter/move towards transition target `IDLE`.
            this.#IDLE_enter();
            
            // Step 4: complete transition. Ends event dispatch. No other behaviors are checked.
            return;
        } // end of behavior for READY
        
        // No ancestor handles this event.
    }
    
    #READY_play_pause_clicked()
    {
        // READY behavior
        // uml: PLAY_PAUSE_CLICKED / { this.actions.startNewStoryProcess(); this.actions.loadPlayer(); } TransitionTo(LOADING)
        {
            // Step 1: Exit states until we reach `ROOT` state (Least Common Ancestor for transition).
            this.#READY_exit();
            
            // Step 2: Transition action: `this.actions.startNewStoryProcess(); this.actions.loadPlayer();`.
            this.actions.startNewStoryProcess(); this.actions.loadPlayer();
            
            // Step 3: Enter/move towards transition target `LOADING`.
            this.#LOADING_enter();
            
            // Step 4: complete transition. Ends event dispatch. No other behaviors are checked.
            return;
        } // end of behavior for READY
        
        // No ancestor handles this event.
    }
    
    
    ////////////////////////////////////////////////////////////////////////////////
    // event handlers for state TEXT_DISPLAYED
    ////////////////////////////////////////////////////////////////////////////////
    
    #TEXT_DISPLAYED_enter()
    {
        this.stateId = AudioStateMachine.StateId.TEXT_DISPLAYED;
    }
    
    #TEXT_DISPLAYED_exit()
    {
        this.stateId = AudioStateMachine.StateId.ROOT;
    }
    
    // Thread safe.
    static stateIdToString(id)
    {
        switch (id)
        {
            case AudioStateMachine.StateId.ROOT: return "ROOT";
            case AudioStateMachine.StateId.IDLE: return "IDLE";
            case AudioStateMachine.StateId.LOADING: return "LOADING";
            case AudioStateMachine.StateId.PAUSED: return "PAUSED";
            case AudioStateMachine.StateId.PLAYING: return "PLAYING";
            case AudioStateMachine.StateId.READY: return "READY";
            case AudioStateMachine.StateId.TEXT_DISPLAYED: return "TEXT_DISPLAYED";
            default: return "?";
        }
    }
    
    // Thread safe.
    static eventIdToString(id)
    {
        switch (id)
        {
            case AudioStateMachine.EventId.CANCEL: return "CANCEL";
            case AudioStateMachine.EventId.FORM_NOT_EMPTY: return "FORM_NOT_EMPTY";
            case AudioStateMachine.EventId.FORM_SUBMITTED: return "FORM_SUBMITTED";
            case AudioStateMachine.EventId.FROM_START_CLICKED: return "FROM_START_CLICKED";
            case AudioStateMachine.EventId.INPUT_CLEARED: return "INPUT_CLEARED";
            case AudioStateMachine.EventId.MUSIC_OVER: return "MUSIC_OVER";
            case AudioStateMachine.EventId.PLAY_PAUSE_CLICKED: return "PLAY_PAUSE_CLICKED";
            case AudioStateMachine.EventId.SPEECH_READY: return "SPEECH_READY";
            default: return "?";
        }
    }
}
